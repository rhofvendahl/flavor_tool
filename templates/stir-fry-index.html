<!doctype html>
<html>
<head>
    <title>Flavor Tool</title>

    <link rel='stylesheet' href='static/css/lib/selectivity-jquery.min.css' type='text/css'>
    <link rel='stylesheet' href='//stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='static/css/lib/vis-network.min.css' rel='stylesheet' type='text/css' />
    <link href='static/css/stir-fry-style.css' rel='stylesheet' type='text/css' />
    <link rel='shortcut icon' href='static/img/favicon.ico'>

    <script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type='text/javascript' src='//stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js'></script>
    <script type='text/javascript' src='static/js/lib/vis-network.min.js'></script>
    <script type='text/javascript' src='static/js/lib/selectivity-jquery.min.js'></script>
    <script type='text/javascript' src='static/js/StirFryIngredient.js'></script>
    <script type='text/javascript' src='static/js/StirFryManager.js'></script>
    <script type='text/javascript' src='static/js/stir-fry-main.js'></script>
</head>

<body>
    <div class='container-fluid'>
        <div id='generating' class="card shadow">
            <div class="card-header">Generating...</div>
        </div>
        <div id='about-window' class="card shadow">
            <div class="card-header">
                About
                <button id='about-close' type="button" class="btn btn-sm btn-danger float-right">Close</button>
            </div>
            <div class="card-body">
                <h5 class="card-title mb-4">Welcome to the Flavor Tool!</h5>
                <p class="card-text mb-4">The top left box lists all currently present ingredients. To add an ingredient, just search and click (or press enter); to remove an ingredient press the "X" (or backspace). You can use the "all" and "none" buttons to add or remove in bulk.</p>
                <p class="card-text mb-2">The main window displays each present ingredient as a color-coded node:</p>
                <ul class='mb-4'>
                    <li>green=vegetable</li>
                    <li>orange=fruit</li>
                    <li>brown=protein</li>
                    <li>tan=grain</li>
                    <li>grey=other</li>
                </ul>
                <p class="card-text mb-2">There are three ways to manipulate these ingredients:</p>
                <ol class='mb-4'>
                    <li><strong>Click to select</strong> an ingredient, marking it to include in the stir-fry. Click again to de-select.</li>
                    <li><strong>Double click to lock</strong> an ingredient. If you auto-generate a stir-fry, these ingredients will be used as a base. Double click again to unlock.</li>
                    <li><strong>Right click</strong> an ingredient to show which other ingredients <strong>pair with</strong> it. Black lines are strong pairs, grey lines are weaker.</li>
                </ol>
                <p class="card-text mb-4">Selected ingredients that pair well together will be connected with a solid line (black for strong, grey for weak).</p>
                <p class="card-text mb-4">When you've selected a set of ingredients you like, try locking them and pressing "<strong>Generate</strong>", on the left (or spacebar). This will draw on a bunch of flavor data (mostly gathered from <em>The Vegetarian Flavor Bible</em>, Page 2014) to select some other ingredients that (hopefully) complement the ones you've locked, filling in the missing pieces.</p>
                <p class="card-text mb-4">The "<strong>Save</strong>" and "<strong>Load</strong>" buttons let you save multiple projects, so you can play around with different configurations, or pick up where you left off.</p>
                <p class="card-text mb-4">When you're ready to get cookin, just hit "<strong>Get recipe</strong>" and go to town.</p>
                <h5 class="card-title">Enjoy! :-)</h5>
            </div>
        </div>
        <div id='recipe-window' class="card shadow">
            <div id='recipe-header' class="card-header">
                Recipe
                <button id='recipe-close' type="button" class="btn btn-sm btn-danger float-right">Close</button>
            </div>
            <div id='recipe-body' class="card-body">
                <h5 class="card-title">Ingredients:</h5>
                <ul id='ingredients-list'>
                </ul>
                <h5 class="card-title">Notes:</h5>
                <ul>
                    <li>Stir-frying (aka saut√©ing) mostly involves frying vegetables in oil, over high heat. To do it by the book (specifically <em>Tassajara Cooking</em>, Brown 1974), the veg must be dry and not piled up; if the pieces don't have continuous contact with the pan, the ones on top will be steaming. For crunchy veg like broccoli you'll want to turn off the heat while it's still a little undercooked, since it'll keep cooking some while it cools down.</li>
                    <li>Timing and seasoning are the big challenges for me, and it's even trickier with the diversity (and sometimes weirdness) of generated recicpes. The best I can offer is:</li>
                        <ol style='list-style-type: lower-alpha;'>
                            <li>Cook in stages (onions, oil, stuff you really want fried; tough veg; soft veg and fruit and seasoning; more seasoning & maybe garnish).</li>
                            <li>Balance flavors (savory, salty, sweet, sour, spicy, bitter).</li>
                            <li>Season slowly and, if you've got fresh veg to show off, sparingly.</li>
                        </ol>
                    <li>Oh, and another note on herbs/spices: these can be added mid or late. Adding earlier means more flavor blending, later means more flavor. And ground up stuff takes less cooking.</li>
                </ul>
                <h5 class="card-title">Instructions:</h5>
                <ol>
                    <li>Pre: Heat pan, then add oil. Just barely cover the pan, a little goes a long way.</li>
                    <li>Early stage (4-8 mins): Add stuff like onions, that you really want to caramelize and/or fry. I like to add any mushrooms in at this stage, to get that strong nutty flavor. Tofu and potatoes can also fit here, especially with larger chunks. Eggplant too, but that's complicated.</li>
                    <li>Mid stage (3-4 mins): Add tough veg (including onion & mushroom if you skipped the previous step). Springle with salt then toss veg, lightly coating each piece with salt and oil. Also add any seasonings that you want to soak in or that are tough, eg. anice seeds.</li>
                    <li>Late stage (2-3 mins): Add more delicate veg, like spinach or peas. Also fruit (that you don't want as garnish) and any remaining seasonings that need cooking (like powders). Add stuff with complex flavors that could be destroyed by lotsa heat, like chiles/vinegar/truffles/fennel root. Nuts and seeds if you want to toast them (which I recommend).</li>
                    <li>Flavoring: Salt, vinegar, tamari - whatever's needed to get the taste you want. Also things that don't need cooking - fruits, nuts, seeds, fennel, stuff like that. It can be fun to use garnishes (eg. chopped chives, fennel, mint, lemon slices) to make a plate of food look pretty!</li>
                </ol>
                <h5 class="card-title">Bon voyage :-)</h5>
            </div>
        </div>
        <div id='main' class='row'>
            <div id='controls' class='col-2 p-3 shadow'>
                <div id='present'></div>
                <button id='all' type="button" class="btn btn-secondary mt-3 mr-1">All</button>
                <button id='none' type="button" class="btn btn-secondary mt-3">None</button><br>
                <button id='save' type="button" class="btn btn-secondary mt-3 mr-1">Save</button>
                <button id='load' type="button" class="btn btn-secondary mt-3">Load</button><br>
                <button id='generate' type="button" class="btn btn-danger mt-3">Generate stir-fry</button><br>
                <button id='recipe' type="button" class="btn btn-warning mt-3">Get recipe</button><br>
                <button id='about' type="button" class="btn btn-primary mt-3">About</button>
                <a id='salad' class="btn btn-success ml-3 mb-3" href="/salad" role="button">Salad mode</a>
            </div>
            <div id='network' class='col'></div>
        </div>
    </div>
</body>
</html>
